
#DBNextcloud
dbnextcloud:
  image: mariadb:latest
  container_name: dbnextcloud
  environment:
    - MYSQL_ROOT_PASSWORD=%MYSQL_ROOT_PASSWD%
    - MYSQL_DATABASE=dbnextcloud
    - MYSQL_USER=dbnextcloud
    - MYSQL_PASSWORD=%MYSQL_NEXTCLOUD_PASSWD%
  volumes:
    - /dockers/mariadb/db/nextcloud:/var/lib/mysql
    
#Nextcloud
nextcloud:
  image: wonderfall/nextcloud:latest
  container_name: nextcloud
  environment:
    - UID=%UID%
    - GID=%GID%
    - UPLOAD_MAX_SIZE=%UPLOAD_NEXTCLOUD%
    - APC_SHM_SIZE=128M
    - OPCACHE_MEM_SIZE=128
    - CRON_PERIOD=15m
    - TZ=%TIMEZONE%
    - ADMIN_USER=%NEXTCLOUD_ADMIN_USER%
    - ADMIN_PASSWORD=%NEXTCLOUD_ADMIN_PASSWD%
    - DOMAIN=%CLOUD_DOMAIN%
    - DB_TYPE=mysql
    - DB_NAME=dbnextcloud
    - DB_USER=dbnextcloud
    - DB_PASSWORD=%MYSQL_NEXTCLOUD_PASSWD%
    - DB_HOST=dbnextcloud
  links:
    - dbnextcloud:dbnextcloud
  ports:
    - %PORT%:8888
  volumes:
    - /dockers/nextcloud/data:/data
    - /dockers/nextcloud/config:/config
    - /dockers/nextcloud/apps:/apps
    - /dockers/nextcloud/themes:/nextcloud/themes
    
